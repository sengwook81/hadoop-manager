
CREATE TABLE TB_APPLICATION
(
	APP_NM                VARCHAR(50) NULL,
	APP_VER               VARCHAR(20) NULL,
	APP_VIEW_ID           VARCHAR(20) NULL,
	CLUSTER_YN            VARCHAR(20) NULL,
	APP_ID                VARCHAR(20) NULL
)
;



ALTER TABLE TB_APPLICATION
	ADD  PRIMARY KEY (APP_ID)
;



CREATE TABLE TB_APPLICATION_CONFIG
(
	APP_ID                VARCHAR(20) NOT NULL,
	CONFIG_ID             VARCHAR(20) NULL,
	CONFIG_NAME           VARCHAR(50) NULL,
	CONFIG_TYPE           VARCHAR(20) NULL
)
;



ALTER TABLE TB_APPLICATION_CONFIG
	ADD  PRIMARY KEY (APP_ID,CONFIG_ID)
;



CREATE TABLE TB_APPLICATION_CONFIG_PROPERTY
(
	APP_ID                VARCHAR(20) NOT NULL,
	CONFIG_ID             VARCHAR(20) NOT NULL,
	PROP_KEY              VARCHAR(20) NULL,
	PROP_VAL              VARCHAR(20) NULL,
	PROP_DESC             TEXT NULL
)
;



ALTER TABLE TB_APPLICATION_CONFIG_PROPERTY
	ADD  PRIMARY KEY (APP_ID,CONFIG_ID,PROP_KEY)
;



CREATE TABLE TB_SERVER
(
	SERVER_ID             VARCHAR(20) NULL,
	SERVER_NM             VARCHAR(50) NULL,
	HOST_INFO             VARCHAR(20) NULL,
	USER_ID               VARCHAR(20) NULL,
	USER_PWD              VARCHAR(20) NULL,
	GROUP_ID              VARCHAR(20) NOT NULL
)
;



ALTER TABLE TB_SERVER
	ADD  PRIMARY KEY (GROUP_ID,SERVER_ID)
;



CREATE TABLE TB_SERVER_APPLICATION
(
	SERVER_ID             VARCHAR(20) NOT NULL,
	GROUP_ID              VARCHAR(20) NOT NULL,
	APP_ID                VARCHAR(20) NOT NULL,
	APP_EXT_OPTS          VARCHAR(20) NULL,
	INSTALL_YN            VARCHAR(20) NULL
)
;



ALTER TABLE TB_SERVER_APPLICATION
	ADD  PRIMARY KEY (GROUP_ID,SERVER_ID,APP_ID)
;



CREATE TABLE TB_SERVER_APPLICATION_CONFIG
(
	SERVER_ID             VARCHAR(20) NOT NULL,
	GROUP_ID              VARCHAR(20) NOT NULL,
	APP_ID                VARCHAR(20) NOT NULL,
	CONFIG_ID             VARCHAR(20) NOT NULL,
	APP_EXT_OPTS          VARCHAR(20) NOT NULL
)
;



ALTER TABLE TB_SERVER_APPLICATION_CONFIG
	ADD  PRIMARY KEY (SERVER_ID,GROUP_ID,APP_ID,CONFIG_ID,APP_EXT_OPTS)
;



CREATE TABLE TB_SERVER_APPLICATION_CONFIG_PROPERTY
(
	SERVER_ID             VARCHAR(20) NOT NULL,
	GROUP_ID              VARCHAR(20) NOT NULL,
	APP_ID                VARCHAR(20) NOT NULL,
	CONFIG_ID             VARCHAR(20) NOT NULL,
	PROP_KEY              VARCHAR(20) NOT NULL,
	PROP_VAL              VARCHAR(20) NULL,
	APP_EXT_OPTS          VARCHAR(20) NOT NULL
)
;



ALTER TABLE TB_SERVER_APPLICATION_CONFIG_PROPERTY
	ADD  PRIMARY KEY (SERVER_ID,GROUP_ID,APP_ID,CONFIG_ID,PROP_KEY,APP_EXT_OPTS)
;



CREATE TABLE TB_SERVERGROUP
(
	GROUP_ID              VARCHAR(20) NULL,
	GROUP_NAME            VARCHAR(50) NULL,
	GROUP_DESC            TEXT NULL
)
;



ALTER TABLE TB_SERVERGROUP
	ADD  PRIMARY KEY (GROUP_ID)
;



ALTER TABLE TB_APPLICATION_CONFIG
	ADD FOREIGN KEY R_1 (APP_ID) REFERENCES TB_APPLICATION(APP_ID)
;



ALTER TABLE TB_APPLICATION_CONFIG_PROPERTY
	ADD FOREIGN KEY R_2 (APP_ID,CONFIG_ID) REFERENCES TB_APPLICATION_CONFIG(APP_ID,CONFIG_ID)
;



ALTER TABLE TB_SERVER
	ADD FOREIGN KEY R_3 (GROUP_ID) REFERENCES TB_SERVERGROUP(GROUP_ID)
;



ALTER TABLE TB_SERVER_APPLICATION
	ADD FOREIGN KEY R_4 (GROUP_ID,SERVER_ID) REFERENCES TB_SERVER(GROUP_ID,SERVER_ID)
;


ALTER TABLE TB_SERVER_APPLICATION
	ADD FOREIGN KEY R_5 (APP_ID) REFERENCES TB_APPLICATION(APP_ID)
;



ALTER TABLE TB_SERVER_APPLICATION_CONFIG
	ADD FOREIGN KEY R_6 (GROUP_ID,SERVER_ID,APP_ID) REFERENCES TB_SERVER_APPLICATION(GROUP_ID,SERVER_ID,APP_ID)
;


ALTER TABLE TB_SERVER_APPLICATION_CONFIG
	ADD FOREIGN KEY R_7 (APP_ID,CONFIG_ID) REFERENCES TB_APPLICATION_CONFIG(APP_ID,CONFIG_ID)
;



ALTER TABLE TB_SERVER_APPLICATION_CONFIG_PROPERTY
	ADD FOREIGN KEY R_8 (SERVER_ID,GROUP_ID,APP_ID,CONFIG_ID,APP_EXT_OPTS) REFERENCES TB_SERVER_APPLICATION_CONFIG(SERVER_ID,GROUP_ID,APP_ID,CONFIG_ID,APP_EXT_OPTS)
;


ALTER TABLE TB_SERVER_APPLICATION_CONFIG_PROPERTY
	ADD FOREIGN KEY R_9 (APP_ID,CONFIG_ID,PROP_KEY) REFERENCES TB_APPLICATION_CONFIG_PROPERTY(APP_ID,CONFIG_ID,PROP_KEY)
;

